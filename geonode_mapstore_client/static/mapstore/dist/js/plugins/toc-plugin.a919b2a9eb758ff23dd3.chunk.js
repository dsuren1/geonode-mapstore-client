(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6895],{690825:(e,t,o)=>{"use strict";o.d(t,{H:()=>g,k:()=>T});var r=o(580416),n=o(501157),i=o(432420),a=o(375875),l=o.n(a),s=o(472500),c=o.n(s),p=o(727418),u=o.n(p),f=o(505055),d=o.n(f);const y={describeCoverage:function(e,t){var o=c().parse(e,!0),r=c().format(u()({},o,{query:u()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},o.query)}));return l().get(r).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,o){t=o})),t}))}};var m=o(624262),b=o(227361),v=o.n(b),h=o(838848);function g(e,t,o){return function(a){return n.ZP.describeLayer(e,t.name,o).then((function(o){return o&&"WFS"===o.owsType?i.v$(e,o.name).then((function(e){return o.geometryType=(0,h.mI)(e),a((0,r.tV)(t.id,"id",{describeLayer:o,describeFeatureType:e}))})).catch((function(){return a((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe feature found"}}))})):(o&&"WCS"===o.owsType&&y.describeCoverage(e,o.name).then((function(e){var n=v()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");o.bands=n&&"string"==typeof n?["1"]:n.map((function(e,t){return t+1+""})),a((0,r.tV)(t.id,"id",{describeLayer:o,describeCoverage:e}))})).catch((function(){return a((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe coverage found"}}))})),a((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe Layer found"}})))})).catch((function(e){return a((0,r.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function T(e,t){var o=(0,m.Fh)(e);return function(i){return i((0,r.tV)(e.id,"id",{capabilitiesLoading:!0})),n.ZP.getCapabilities(o,t).then((function(t){var o=n.ZP.parseLayerCapabilities(t,e);i(o?(0,r.tV)(e.id,"id",(0,m.IA)(o)):(0,r.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,r.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},95797:(e,t,o)=>{"use strict";o.d(t,{DR:()=>r,S0:()=>n,u7:()=>i,lj:()=>a,yz:()=>l,lN:()=>s,zW:()=>c,Yx:()=>p,VN:()=>u,Hu:()=>f,VT:()=>d,RD:()=>y,Qq:()=>m,R1:()=>b,_T:()=>v,vO:()=>h,XO:()=>g,jG:()=>T,Xc:()=>E,gT:()=>O,rG:()=>w,t3:()=>S,Fs:()=>L,w_:()=>P,Lm:()=>_,rh:()=>R,rP:()=>j,IO:()=>C}),o(375875);var r="LAYER_SELECTED_FOR_SEARCH",n="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",l="FEATURE_LOADING",s="FEATURE_TYPE_ERROR",c="FEATURE_ERROR",p="QUERY_CREATE",u="QUERY:UPDATE_QUERY",f="QUERY_RESULT",d="QUERY_ERROR",y="RESET_QUERY",m="QUERY",b="INIT_QUERY_PANEL",v="QUERY:TOGGLE_SYNC_WMS",h="QUERY:TOGGLE_LAYER_FILTER";function g(){return{type:v}}function T(){return{type:h}}function E(){return{type:b}}function O(e,t){return{type:n,url:e,typeName:t}}function w(e,t){return{type:i,typeName:e,featureType:t}}function S(e,t){return{type:s,typeName:e,error:t}}function L(e){return{type:l,isLoading:e}}function P(e,t,o,r,n){return{type:f,searchUrl:t,filterObj:o,result:e,queryOptions:r,reason:n}}function _(e){return{type:d,error:e}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,o=e.reason,r=e.useLayerFilter;return{type:u,updates:t,reason:o,useLayerFilter:r}}function j(e,t){return{type:p,searchUrl:e,filterObj:t}}function C(e,t,o,r){return{type:m,searchUrl:e,filterObj:t,queryOptions:o,reason:r}}},557579:(e,t,o)=>{"use strict";o.d(t,{Jm:()=>l,AE:()=>s,dm:()=>c,n8:()=>p,BV:()=>u,Cz:()=>f,wb:()=>d,$A:()=>y,eb:()=>m,v8:()=>b,yY:()=>v,J5:()=>h,ff:()=>g,S0:()=>T,Q6:()=>E,kb:()=>O,GV:()=>w,LH:()=>S,lG:()=>L,Km:()=>P,pV:()=>_,V5:()=>R,IT:()=>j,VR:()=>C,jv:()=>x,oU:()=>A,h9:()=>D,jB:()=>G,Ym:()=>I,uU:()=>k,ke:()=>N,nw:()=>Z,A4:()=>M,C2:()=>F,Qe:()=>B,sZ:()=>W,Ij:()=>Y,Ko:()=>U,E9:()=>q,K4:()=>H,c_:()=>V,uT:()=>Q,bS:()=>z,Rz:()=>K,t4:()=>J,_k:()=>X,w2:()=>$,YA:()=>ee,sD:()=>te,Gn:()=>oe,Rb:()=>re,fy:()=>ne,kr:()=>ie,f:()=>ae,Ff:()=>le,Pt:()=>se,ep:()=>ce});var r=o(423570),n=o.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var l="WIDGETS:INSERT",s="WIDGETS:NEW",c="WIDGETS:EDIT",p="WIDGETS:EDIT_NEW",u="WIDGETS:EDITOR_CHANGE",f="WIDGETS:EDITOR_SETTING_CHANGE",d="WIDGETS:UPDATE",y="WIDGETS:UPDATE_PROPERTY",m="WIDGETS:UPDATE_LAYER",b="WIDGETS:CHANGE_LAYOUT",v="WIDGETS:DELETE",h="WIDGETS:REPLACE",g="WIDGETS:CLEAR_WIDGETS",T="WIDGETS:ADD_DEPENDENCY",E="WIDGETS:REMOVE_DEPENDENCY",O="WIDGETS:LOAD_DEPENDENCIES",w="WIDGETS:RESET_DEPENDENCIES",S="WIDGETS:TOGGLE_CONNECTION",L="WIDGETS:OPEN_FILTER_EDITOR",P="WIDGETS:EXPORT_CSV",_="WIDGETS:EXPORT_IMAGE",R="WIDGETS:WIDGET_SELECTED",j="WIDGETS:NEW_CHART",C="floating",x="dependencySelector",A=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,D=/^maps\["?([^"\]]*)"?\]\.?(.*)$/,G=/^widgets\["?([^"\]]*)"?\]\.maps\["?([^"\]]*)"?\]\.?(.*)$/,I="WIDGET:TOGGLE_COLLAPSE",k="WIDGET:TOGGLE_COLLAPSE_ALL",N="WIDGET:TOGGLE_MAXIMIZE",Z="WIDGET:TOGGLE_TRAY",M=function(e){return{type:s,widget:e}},F=function(){return{type:j}},B=function(e){return{type:l,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,id:n()(),widget:e}},W=function(e){return{type:h,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,widgets:e}},Y=function(e,t,o){return{type:y,id:e,target:arguments.length>4&&void 0!==arguments[4]?arguments[4]:C,key:t,value:o,mode:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace"}},U=function(e){return{type:m,layer:e}},q=function(e){return{type:v,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,widget:e}},H=function(){return{type:g}},V=function(e,t){return{type:b,allLayouts:t,layout:e,target:arguments.length>2&&void 0!==arguments[2]?arguments[2]:C}},Q=function(e){return{type:c,widget:e}},z=function(e,t){return{type:p,widget:e,settings:t}},K=function(e,t){return{type:u,key:e,value:t}},J=function(e,t){return{type:f,key:e,value:t}},X=function(e){return{type:O,dependencies:e}},$=function(e,t,o,r){return{type:S,active:e,availableDependencies:t,options:o,target:r}},ee=function(e){return J("step",e)},te=function(e){var t=e.data,o=void 0===t?[]:t,r=e.title;return{type:P,data:o,title:void 0===r?"export":r}},oe=function(e,t){return{type:R,widget:e,opts:t}},re=function(e){var t=e.widgetDivId;return{type:_,widgetDivId:t}},ne=function(){return{type:L}},ie=function(e,t){return o=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){var r,n,a;r=e,n=t,a=o[t],(n=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({active:e},t),J("".concat(x),o);var o},ae=function(e){return{type:I,widget:e,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:C}},le=function(){return{type:k,target:arguments.length>0&&void 0!==arguments[0]?arguments[0]:C}},se=function(e){return{type:N,widget:e,target:arguments.length>1&&void 0!==arguments[1]?arguments[1]:C}},ce=function(e){return{type:Z,value:e}}},359294:(e,t,o)=>{"use strict";o.d(t,{Z:()=>w});var r=o(675263),n=o.n(r),i=o(124852),a=o.n(i),l=o(480681),s=o(950966),c=o(359112),p=o(893379),u=o.n(p),f=o(161253);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function b(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function T(e,t,o){return(t=E(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function E(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}u()(f.Z,{insert:"head",singleton:!1}),f.Z.locals;var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(p,e);var t,o,r,n,i=(r=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(n){var o=g(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return T(h(e=i.call.apply(i,[this].concat(o))),"getFilteredTitle",(function(t){var o=t.toLowerCase().split(e.props.filterText.toLowerCase());return e.props.filterText?o.reduce((function(t,r,n){return n===o.length-1?[].concat(y(t),[r]):[].concat(y(t),[r,a().createElement("strong",{key:n},e.props.filterText.toLowerCase())])}),[]):t})),T(h(e),"renderTitle",(function(){var t=(0,c.BC)(e.props).title;return a().createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}return t=p,(o=[{key:"render",value:function(){var e=(0,c.BC)(this.props).tooltipText;return this.props.tooltip&&e?a().createElement(s.Z,{placement:this.props.node.tooltipPlacement||"top",overlay:a().createElement(l.Tooltip,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&b(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(a().Component);T(O,"propTypes",{node:n().object,onClick:n().func,onContextMenu:n().func,currentLocale:n().string,filterText:n().string,tooltip:n().bool,tooltipOptions:n().object}),T(O,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}});const w=O},262770:(e,t,o)=>{"use strict";o.d(t,{Z:()=>E});var r=o(124852),n=o.n(r),i=o(675263),a=o.n(i),l=o(441609),s=o.n(l),c=o(281763),p=o.n(c),u=o(490079);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function y(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,o){return(t=g(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(l,e);var t,o,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(i){var o=v(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),h(b(t=a.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),h(b(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),h(b(t),"useLegendOptions",(function(){return!s()(t.props.node.legendOptions)&&p()(t.props.node.legendOptions.legendHeight)&&p()(t.props.node.legendOptions.legendWidth)})),h(b(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=n().createRef(),t}return t=l,o=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){h(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,o=t&&this.useLegendOptions();return t?n().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},n().createElement(u.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:o&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:o&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],o&&y(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(n().Component);h(T,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),h(T,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const E=T},380876:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var Bootstrap=__webpack_require__(480681),Message=__webpack_require__(805346).Z,React=__webpack_require__(124852),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};const __WEBPACK_DEFAULT_EXPORT__=RenderTemplate},382571:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var React=__webpack_require__(124852),PropTypes=__webpack_require__(675263),isEqual=__webpack_require__(618446),_require=__webpack_require__(59286),parseTemplate=_require.parseTemplate,Template=function(_React$Component){_inherits(Template,_React$Component);var _super=_createSuper(Template);function Template(){var _this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}}),module.exports=Template},572688:(e,t,o)=>{"use strict";o.d(t,{Z:()=>T});var r=o(124852),n=o.n(r),i=o(675263),a=o.n(i),l=o(38560),s=o(843614),c=o(472986),p=o.n(c);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},f.apply(this,arguments)}function d(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t,o){return(t=h(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function h(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,o,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(i){var o=b(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return v(m(e=a.call.apply(a,[this].concat(o))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=c,(o=[{key:"render",value:function(){var e=this,t=n().createElement("span",{role:"footer"},n().createElement("div",{style:{float:"left"}}),n().createElement(l.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?n().createElement(p(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?n().createElement(l.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):n().createElement("span",null)),o=this.props.body;return n().createElement(s.Z,f({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),n().createElement(s.Z.Header,{key:"dialogHeader",closeButton:!0},n().createElement(s.Z.Title,null,this.props.titleText)),n().createElement(s.Z.Body,null,o),n().createElement(s.Z.Footer,null,t))}}])&&d(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(n().Component);v(g,"propTypes",{className:a().string,show:a().bool,options:a().object,onConfirm:a().func,onClose:a().func,closeGlyph:a().string,style:a().object,buttonSize:a().string,includeCloseButton:a().bool,body:a().oneOfType([a().string,a().element]),titleText:a().oneOfType([a().string,a().element]),confirmText:a().oneOfType([a().string,a().element]),cancelText:a().oneOfType([a().string,a().element]),running:a().bool}),v(g,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const T=g},38560:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var r=o(480681),n=o(124852),i=o.n(n),a=o(294184),l=o.n(a),s=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},c.apply(this,arguments)}const p=(u=r.Button,i().forwardRef((function(e,t){var o=e.disabled,r=e.className,n=e.onClick,a=void 0===n?function(){}:n,p=function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(e,s);return i().createElement(u,c({ref:t,className:o?l()("disabled",r):r,onClick:function(){o||a.apply(void 0,arguments)}},p),p.children)})));var u},698772:(e,t,o)=>{"use strict";o.d(t,{Z:()=>g});var r=o(893379),n=o.n(r),i=o(172704);n()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=o(675263),l=o.n(a),s=o(124852),c=o.n(s),p=o(480681);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t,o){return(t=v(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function v(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,o,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(n){var o=m(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return b(y(e=i.call.apply(i,[this].concat(o))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),b(y(e),"onClear",(function(){e.props.onFilter("")})),e}return t=a,(o=[{key:"render",value:function(){var e=this.props.filterText?c().createElement(p.OverlayTrigger,{placement:"bottom",overlay:c().createElement(p.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},c().createElement(p.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):c().createElement(p.Glyphicon,{className:"text-primary",glyph:"filter"});return c().createElement(p.FormGroup,{className:"mapstore-filter"},c().createElement(p.InputGroup,null,c().createElement(p.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),c().createElement(p.InputGroup.Addon,{className:"square-button-md"},this.props.loading?c().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&f(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(c().Component);b(h,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),b(h,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const g=h},1036:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(618446),n=o.n(r);const i=(0,o(867076).shouldUpdate)((function(e,t){return!n()(e.start,t.start)||e.disabled!==t.disabled}))(o(185552))},993451:(e,t,o)=>{"use strict";o.d(t,{Z:()=>T});var r=o(86638),n=o(675263),i=o.n(n),a=o(984596),l=o.n(a),s=o(701469),c=o.n(s),p=o(414293),u=o.n(p),f=o(747037),d=o.n(f),y=o(867076),m=["messages"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){g(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function g(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,y.compose)((0,y.getContext)({messages:i().object}),(0,y.mapProps)((function(o){var n=o.messages,i=function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(o,m);return h(h({},i),l()(e).reduce(function(e,t,o){return function(){var n=arguments.length>1?arguments[1]:void 0;return h(h({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},g({},n,e[n]&&function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(n){var i=(0,r.S$)(e,n[o]||d()(n)&&n||"");return h(h({},n),{},g({},o,u()(i)?t:i))}));var n=(0,r.S$)(e,t);return u()(n)?t:n}(t,e[n],o)))}}(i,n,t),{}))})))}},142523:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Et});var r=o(675263),n=o.n(r),i=o(124852),a=o.n(i),l=o(171703),s=o(867076),c=o(480681),p=o(580416),u=o(640512),f=o(690825),d=o(801550),y=o(197395),m=o(675110),b=o(671314),v=o(800827),h=o(308316),g=o(607147),T=o(307877),E=o(274621),O=o(38842),w=o(624262),S=o(552259),L=o(86638),P=o(805346),_=o(727418),R=o.n(_),j=o(624273),C=o.n(j),x=o(513218),A=o.n(x),D=o(91175),G=o.n(D),I=o(313311),k=o.n(I),N=o(59854),Z=o.n(N),M=o(782904),F=o(557579),B=o(931273),W=o(788113),Y=o(93152),U=o(784715),q=o(618446),H=o.n(q),V=o(221338),Q=o(698772);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function K(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e,t,o){return(t=te(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function te(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===z(t)?t:String(t)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(l,e);var t,o,r,n,i=(r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(r);if(n){var o=$(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return ee(X(e=i.call.apply(i,[this].concat(o))),"renderTitle",(function(){return a().createElement(c.Row,null,a().createElement(c.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},a().createElement("div",{className:"mapstore-toc-head-title",title:e.props.title},a().createElement(c.Glyphicon,{glyph:"1-map"}),"  ",e.props.title)))})),ee(X(e),"renderFilter",(function(){return a().createElement(c.Row,null,a().createElement(c.Col,{xs:12,className:"text-center"},a().createElement(Q.Z,{onFocus:e.props.onClear,filterPlaceholder:e.props.filterPlaceholder,tooltipClear:e.props.filterTooltipClear,filterText:e.props.filterText,onFilter:e.props.onFilter})))})),ee(X(e),"renderTools",(function(){return a().createElement(c.Row,null,a().createElement(c.Col,{xs:12,className:"text-center"},e.props.toolbar))})),e}return t=l,(o=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return a().createElement("div",{className:"mapstore-toc-head"+t},a().createElement(c.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&K(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);ee(oe,"propTypes",{title:n().string,filterText:n().string,filterPlaceholder:n().oneOfType([n().object,n().string]),showTitle:n().bool,showFilter:n().oneOfType([n().bool,n().number]),showTools:n().bool,toolbar:n().object,onFilter:n().func,onClear:n().func,filterTooltipClear:n().oneOfType([n().object,n().string])}),ee(oe,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"});const re=oe;var ne=o(490173),ie=o(950966),ae=o(572688),le=o(893379),se=o.n(le),ce=o(393483);se()(ce.Z,{insert:"head",singleton:!1}),ce.Z.locals;var pe=o(701469),ue=o.n(pe),fe=o(747037),de=o.n(fe),ye=o(382571),me=o.n(ye),be=o(807472),ve=o(399534),he=o(380876),ge=o(3674),Te=o.n(ge),Ee=o(761239),Oe=o(611847),we=o(38560);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Pe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(o),!0).forEach((function(t){xe(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Re(e,t)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function xe(e,t,o){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ae(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Se(t)?t:String(t)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(l,e);var t,o,r,n,i=(r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ce(r);if(n){var o=Ce(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return je(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),xe(je(t=i.call(this,e)),"renderMetadata",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=function(e,o){return a().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,a().createElement(we.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:function(){return function(e,o){t.setState({collapsed:Pe(Pe({},t.state.collapsed),{},xe({},e,o))})}(o,!t.state.collapsed[o])}},a().createElement(c.Glyphicon,{glyph:t.state.collapsed[o]?"plus":"minus"})))},i=Te()(e).filter((function(e){return"references"!==e})).map((function(o){var i,l,s=e[o],c="".concat(r,".").concat(o),p="toc.layerMetadata.".concat(o),u=(0,L.S$)(t.context.messages,p)===p?a().createElement(P.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:o}}):a().createElement(P.Z,{msgId:p}),f=function(e){return a().createElement("tr",null,a().createElement("td",null,u),a().createElement("td",null,e))};if(ue()(s))if(s.length){var d="toc.layerMetadata.itemTitles.".concat(o),y=(0,L.S$)(t.context.messages,d),m=y===d?(0,L.S$)(t.context.messages,"toc.layerMetadata.itemTitles.default"):y,b=s.map((function(e,o){var r,i=(r=o,"".concat(c,"@item_").concat(r));return A()(e)?t.renderMetadata(e,s.length>1?n(a().createElement("h4",null,"".concat(m," #").concat(o+1)),i):null,i):a().createElement("li",{key:o},e)}));i=A()(s[0])?(l=a().createElement("div",null,n(a().createElement("h4",null,u),c),t.state.collapsed[c]?null:a().createElement("div",null,b)),a().createElement("tr",null,a().createElement("td",{colSpan:"2"},l))):f(a().createElement("ul",null,b))}else i=null;else if(de()(s)){var v=(0,Ee.v)(s),h=(0,Oe.K2)(s);i=f(v||h?a().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:h?s:"mailto:".concat(s)},s):s)}return i})).filter((function(e){return!!e}));return a().createElement("div",{style:r?{padding:"8px"}:{}},o,t.state.collapsed[r]?null:a().createElement(c.Table,null,a().createElement("tbody",null,i)))})),t.state={collapsed:{}},t}return t=l,(o=[{key:"renderEmpty",value:function(){return a().createElement("div",null,a().createElement(P.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}},{key:"render",value:function(){var e=this.props.model;return Te()(e).length?a().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}])&&_e(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);xe(De,"propTypes",{model:n().object}),xe(De,"contextTypes",{messages:n().object}),xe(De,"defaultProps",{model:{}});const Ge=De;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function ke(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Be(r.key),r)}}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function Fe(e,t,o){return(t=Be(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Be(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ie(t)?t:String(t)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(l,e);var t,o,r,n,i=(r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(r);if(n){var o=Me(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ze(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return Fe(Ze(e=i.call.apply(i,[this].concat(o))),"onDelete",(function(){e.props.hideLayerMetadata()})),Fe(Ze(e),"onClose",(function(){e.props.hideLayerMetadata()})),Fe(Ze(e),"getTemplate",(function(){var t=e.props.metadataTemplate||Ge;if(ue()(t)||de()(t)){var o=ue()(t)?t.join("\n"):t;return a().createElement(me(),{model:e.props.layerMetadata.metadataRecord,template:o,renderContent:he.Z})}var r=t;return a().createElement(r,{model:e.props.layerMetadata.metadataRecord})})),Fe(Ze(e),"renderBodyTemplate",(function(){return e.props.layerMetadata.maskLoading?null:e.getTemplate()})),e}return t=l,(o=[{key:"render",value:function(){var e=a().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?a().createElement(ve.Z,null,a().createElement(be.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},a().createElement("span",{role:"header"},a().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),a().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?a().createElement(c.Glyphicon,{glyph:this.props.closeGlyph}):a().createElement("span",null,"×"))),a().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&ke(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);Fe(We,"propTypes",{id:n().string,layerMetadata:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),hideLayerMetadata:n().func,closeGlyph:n().string,panelStyle:n().object,panelClassName:n().string,maskLoading:n().bool,layerMetadataPanelTitle:n().oneOfType([n().string,n().object])}),Fe(We,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const Ye=We;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},qe.apply(this,arguments)}function He(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Ve(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?He(Object(o),!0).forEach((function(t){Xe(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):He(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Qe(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}function Xe(e,t,o){return(t=$e(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function $e(e){var t=function(e,t){if("object"!==Ue(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ue(t)?t:String(t)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(l,e);var t,o,r,n,i=(r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Je(r);if(n){var o=Je(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return Xe(Ke(e=i.call.apply(i,[this].concat(o))),"state",{showDeleteDialog:!1}),Xe(Ke(e),"isNestedGroup",(function(){var t=e.props.selectedGroups.map((function(e){return e.id.split(".")}));return G()(t.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),t[0]))})),Xe(Ke(e),"isLoading",(function(){return G()(e.props.selectedLayers.filter((function(e){return e.loading})))})),Xe(Ke(e),"getStatus",(function(){var t=e.props,o=t.selectedLayers,r=t.selectedGroups,n=e.isNestedGroup(),i=0===o.length&0===r.length?"DESELECT":"";return i=1===o.length&0===r.length?"LAYER":i,i=n?"GROUP":i,i=o.length>1&0===r.length?"LAYERS":i,i=r.length>1&&!n?"GROUPS":i,e.props.selectedLayers.length>0&&e.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===e.props.selectedLayers.length?"".concat(i,"_LOAD_ERROR"):i})),Xe(Ke(e),"getSelectedGroup",(function(){return e.props.selectedGroups.length>0&&e.props.selectedGroups[e.props.selectedGroups.length-1]})),Xe(Ke(e),"getSelectedNodeDepth",(function(){return"DESELECT"===e.getStatus()?0:e.getSelectedGroup().id.split(".").length+1})),Xe(Ke(e),"addLayer",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddLayer(t&&t.id)})),Xe(Ke(e),"addGroup",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddGroup(t&&t.id)})),Xe(Ke(e),"browseData",(function(){e.props.onToolsActions.onBrowseData({url:e.props.selectedLayers[0].search.url||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Xe(Ke(e),"download",(function(){var t;e.props.onToolsActions.onDownload({url:(null===(t=e.props.selectedLayers[0].search)||void 0===t?void 0:t.url)||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Xe(Ke(e),"checkBbox",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),o=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!G()(t)&&"differentCRS"!==o.crs&&o.crs})),Xe(Ke(e),"zoomTo",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),o=t.length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];e.props.onToolsActions.onZoom(o.bounds,o.crs)})),Xe(Ke(e),"showSettings",(function(t){e.props.settings.expanded?e.props.onToolsActions.onHideSettings():"LAYER"===t||"LAYER_LOAD_ERROR"===t?e.props.onToolsActions.onSettings(e.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==e.props.selectedLayers[0].opacity?e.props.selectedLayers[0].opacity:1)}):"GROUP"===t&&e.props.onToolsActions.onSettings(e.props.selectedGroups[e.props.selectedGroups.length-1].id,"groups",{})})),Xe(Ke(e),"showMetadata",(function(){e.props.layerMetadata.expanded?e.props.onToolsActions.onHideLayerMetadata():e.props.onToolsActions.onGetMetadataRecord(e.props.options.metadataOptions)})),Xe(Ke(e),"removeNodes",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"layers")})),e.props.selectedGroups.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"groups")})),e.props.onToolsActions.onClear(),e.closeDeleteDialog()})),Xe(Ke(e),"reload",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onShow(t.id,{visibility:!0}),e.props.onToolsActions.onReload(t.id)}))})),Xe(Ke(e),"closeDeleteDialog",(function(){e.setState({showDeleteDialog:!1})})),Xe(Ke(e),"displayDeleteDialog",(function(){e.setState({showDeleteDialog:!0})})),e}return t=l,(o=[{key:"render",value:function(){var e=this,t=this.getStatus(),o=this.checkBbox(),r=o&&ne.default.defs(o),n=a().createElement(Ye,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?a().createElement(c.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===t?a().createElement(ie.Z,{key:"layerInfo",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},a().createElement(we.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},a().createElement(c.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:a().createElement(ie.Z,{key:"addLayer",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},a().createElement(we.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},a().createElement(c.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?a().createElement(ie.Z,{key:"addGroup",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},a().createElement(we.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},a().createElement(c.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&o?a().createElement(ie.Z,{key:"zoomTo",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-zoomTo"},r?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:a().createElement(P.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:o||" "}}))},a().createElement(we.Z,{bsStyle:"primary",className:"square-button-md",style:r?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:r?this.zoomTo:function(){}},a().createElement(c.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"settings",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},a().createElement(we.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},a().createElement(c.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"queryPanel",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},a().createElement(we.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},a().createElement(c.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"featuresGrid",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},a().createElement(we.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},a().createElement(c.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"removeNode",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},a().createElement(we.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},a().createElement(c.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?a().createElement(ie.Z,{key:"reload",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},a().createElement(we.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},a().createElement(c.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||1!==this.props.selectedLayers.length||!this.props.selectedLayers[0].search||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"widgets",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},a().createElement(we.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},a().createElement(c.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==t||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:a().createElement(ie.Z,{key:"downloadTool",placement:"top",overlay:a().createElement(c.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},a().createElement(we.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},a().createElement(c.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==t||this.props.settings.expanded||this.props.layerdownload.expanded?null:a().createElement(ie.Z,{key:"layerMetadata",placement:"top",overlay:a().createElement(c.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},a().createElement(we.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},a().createElement(c.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((function(o){var r=o.selector;return(void 0===r?function(){return!0}:r)(Ve(Ve({},e.props),{},{status:t}))})).map((function(o){var r=o.Component;return a().createElement(r,qe({},e.props,{status:t}))})),a().createElement(ae.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),n):null}}])&&Qe(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);Xe(et,"propTypes",{groups:n().array,items:n().array,layers:n().array,selectedLayers:n().array,generalInfoFormat:n().string,selectedGroups:n().array,onToolsActions:n().object,text:n().object,activateTool:n().object,options:n().object,style:n().object,settings:n().object,layerMetadata:n().object,layerdownload:n().object,maxDepth:n().number,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func])}),Xe(et,"defaultProps",{groups:[],items:[],layers:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){},onLayerInfo:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const tt=et;var ot=o(581859),rt=o(905419),nt=o(229423),it=o(823208);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},lt.apply(this,arguments)}function st(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dt(r.key),r)}}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ct(e,t)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function ft(e,t,o){return(t=dt(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function dt(e){var t=function(e,t){if("object"!==at(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===at(t)?t:String(t)}var yt=function e(t,o){return t.reduce((function(t,r){var n=R()({},r);return n.nodes&&(n=R()({},n,{nodes:e(n.nodes,o)})),o.forEach((function(e){n=e.func(n)?R()({},n,e.options):R()({},n)})),t.push(n),t}),[])},mt=function(e,t,o){return-1!==((A()(e.title)?e.title[o]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},bt=(0,U.o)(H())((function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active}),m.Bt,m.jN,b.yn,m.yj,m.lI,v.Od,h.Pz,h.KV,m.NP,m.wA,m.l2,v.Zs,W.JF,g.PJ,T.us,Y.c0,E.np,O.wk,(function(e,t,o,r,n,i,a,l,s,c,p,u,f,d,y,m,b,v,h){return{enabled:e,groups:t,settings:o,swipeSettings:r,layerMetadata:n,layerdownload:i,currentZoomLvl:a&&a.zoom,scales:(0,S.getScales)(a&&a.projection||"EPSG:3857",a&&a.mapOptions&&a.mapOptions.view&&a.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:s,selectedNodes:c,filterText:p,generalInfoFormat:m,layers:u,selectedLayers:u.filter((function(e){return G()(c.filter((function(t){return t===e.id})))})),noFilterResults:0===u.filter((function(e){return mt(e,p,l)})).length,updatableLayersCount:u.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:c.map((function(e){return(0,w.Mk)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:f,filteredGroups:yt(t,[{options:{showComponent:!0},func:function(){return!p}},{options:{loadingError:!0},func:function(e){return G()((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return p&&G()((e.nodes||[]).filter((function(t){return mt(t,p,l)||t.nodes&&G()(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return G()((e.nodes||[]).filter((function(e){return e.hidden})))&&1===e.nodes.length}},{options:{exclusiveMapType:!0},func:function(e){return"3dtiles"===e.type&&!b}}]),catalogActive:d,activateWidgetTool:y,user:v,isLocalizedLayerStylesEnabled:h}})),vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(l,e);var t,o,r,n,i=(r=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ut(r);if(n){var o=ut(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===at(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return ft(pt(e=i.call.apply(i,[this].concat(o))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),ft(pt(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||ot.Z;return a().createElement(t,lt({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),ft(pt(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||rt.Z,o=(e.props.resolutions||(0,S.getResolutions)())[Z()(e.props.currentZoomLvl)];return a().createElement(t,lt({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:o}))})),ft(pt(e),"renderTOC",(function(){var t=e.getDefaultGroup(),o=e.getDefaultLayer(),r=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),n=r.length>0?" toc-body-sections-"+r.length:" toc-body-sections";return a().createElement("div",null,a().createElement(re,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:a().createElement(P.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,L.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:a().createElement(tt,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,layers:e.props.layers,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:a().createElement(P.Z,{msgId:"layerProperties.windowTitle"}),opacityText:a().createElement(P.Z,{msgId:"opacity"}),elevationText:a().createElement(P.Z,{msgId:"elevation"}),saveText:a().createElement(P.Z,{msgId:"save"}),closeText:a().createElement(P.Z,{msgId:"close"}),confirmDeleteText:a().createElement(P.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:a().createElement(P.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:a().createElement(P.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:a().createElement(P.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:a().createElement(P.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:a().createElement(P.Z,{msgId:"cancel"}),addLayer:a().createElement(P.Z,{msgId:"toc.addLayer"}),addLayerTooltip:a().createElement(P.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:a().createElement(P.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:a().createElement(P.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:a().createElement(P.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:a().createElement(P.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:a().createElement(P.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:a().createElement(P.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:a().createElement(P.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:a().createElement(P.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:a().createElement(P.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:a().createElement(P.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:a().createElement(P.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:a().createElement(P.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:a().createElement(P.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:a().createElement(P.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:a().createElement(P.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:a().createElement(P.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:a().createElement(P.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:a().createElement(P.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:a().createElement(P.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),a().createElement("div",{className:"mapstore-toc"+n},e.props.noFilterResults&&e.props.filterText?a().createElement("div",null,a().createElement("div",{className:"toc-filter-no-results"},a().createElement(P.Z,{msgId:"toc.noFilteredResults"}))):a().createElement(V.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},a().createElement(nt.Z,{groupElement:t,layerElement:o}))))})),e}return t=l,(o=[{key:"render",value:function(){return this.props.groups?this.renderTOC():a().createElement("div",null)}}])&&st(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);ft(vt,"propTypes",{id:n().number,items:n().array,layers:n().array,buttonContent:n().node,groups:n().array,settings:n().object,swipeSettings:n().object,layerMetadata:n().object,layerdownload:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),refreshMapEnabled:n().bool,groupStyle:n().object,groupPropertiesChangeHandler:n().func,layerPropertiesChangeHandler:n().func,onToggleGroup:n().func,onToggleLayer:n().func,onContextMenu:n().func,onBrowseData:n().func,onQueryBuilder:n().func,onDownload:n().func,onSelectNode:n().func,selectedNodes:n().array,onZoomToExtent:n().func,retrieveLayerData:n().func,onSort:n().func,onSettings:n().func,onRefreshLayer:n().func,onNewWidget:n().func,hideSettings:n().func,updateSettings:n().func,updateNode:n().func,removeNode:n().func,activateTitleTooltip:n().bool,showFullTitleOnExpand:n().bool,activateOpacityTool:n().bool,activateSortLayer:n().bool,activateFilterLayer:n().bool,activateMapTitle:n().bool,activateToolsContainer:n().bool,activateRemoveLayer:n().bool,activateRemoveGroup:n().bool,activateLegendTool:n().bool,activateZoomTool:n().bool,activateQueryTool:n().bool,activateDownloadTool:n().bool,activateSettingsTool:n().bool,activateMetedataTool:n().bool,activateWidgetTool:n().bool,activateLayerInfoTool:n().bool,maxDepth:n().number,visibilityCheckType:n().string,settingsOptions:n().object,chartStyle:n().object,currentZoomLvl:n().number,scales:n().array,layerOptions:n().object,metadataOptions:n().object,spatialOperations:n().array,spatialMethodOptions:n().array,groupOptions:n().object,currentLocale:n().string,currentLocaleLanguage:n().string,onFilter:n().func,filterText:n().string,generalInfoFormat:n().string,selectedLayers:n().array,selectedGroups:n().array,mapName:n().string,filteredGroups:n().array,noFilterResults:n().bool,onAddLayer:n().func,onAddGroup:n().func,onError:n().func,onGetMetadataRecord:n().func,hideLayerMetadata:n().func,activateAddLayerButton:n().bool,activateAddGroupButton:n().bool,activateLayerFilterTool:n().bool,catalogActive:n().bool,refreshLayerVersion:n().func,hideOpacityTooltip:n().bool,layerNodeComponent:n().func,groupNodeComponent:n().func,isLocalizedLayerStylesEnabled:n().bool,onLayerInfo:n().func,onSetSwipeActive:n().func,updatableLayersCount:n().number,onSetSwipeMode:n().func,resolutions:n().func}),ft(vt,"contextTypes",{messages:n().object}),ft(vt,"defaultProps",{items:[],layers:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var ht=(0,s.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,o=void 0===t||t,r=e.removeLayersPermissions,n=void 0===r||r,i=e.sortingPermissions,a=void 0===i||i,l=e.addGroupsPermissions,s=void 0===l||l,c=e.removeGroupsPermissions,p=void 0===c||c,u=e.layerInfoToolPermissions,f=void 0!==u&&u,d=e.activateAddLayerButton,y=e.activateRemoveLayer,m=e.activateSortLayer,b=e.activateAddGroupButton,v=e.activateRemoveGroup,h=e.activateLayerInfoTool,g=e.user,T=function(e,t){var o=g&&"ADMIN"===g.role||!1;return!(!e&&!o)&&t};return{activateAddLayerButton:T(o,d),activateRemoveLayer:T(n,y),activateSortLayer:T(a,m),activateAddGroupButton:T(s,b),activateRemoveGroup:T(p,v),activateLayerInfoTool:T(f,h)}})),gt=(0,s.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,s.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,o=void 0===t?[]:t,r=e.activateAddLayerButton,n=void 0===r||r,i=e.activateAddGroupButton,a=void 0===i||i,l=e.activateQueryTool,s=void 0===l||l,c=e.activateSettingsTool,p=void 0===c||c,u=e.activateLayerFilterTool,f=void 0===u||u,d=e.activateWidgetTool,y=void 0===d||d,m=e.activateLayerInfoTool,b=void 0===m||m,v=e.activateDownloadTool,h=void 0===v||v;return{activateAddLayerButton:n&&!!k()(o,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!k()(o,{name:"AddGroup"})||!1,activateSettingsTool:p&&!!k()(o,{name:"TOCItemsSettings"})||!1,activateQueryTool:s&&!!k()(o,{name:"FeatureEditor"})||!1,activateLayerFilterTool:f&&!!k()(o,{name:"FilterLayer"})||!1,activateWidgetTool:y&&!!k()(o,{name:"WidgetBuilder"})&&!!k()(o,{name:"Widgets"}),activateLayerInfoTool:b&&!!k()(o,{name:"LayerInfo"})||!1,activateDownloadTool:h&&!!k()(o,{name:"LayerDownload"})||!1}}))),Tt=(0,l.connect)(bt,{groupPropertiesChangeHandler:p.WO,layerPropertiesChangeHandler:p.He,retrieveLayerData:f.k,onToggleGroup:(0,w.$0)("groups",p.bh),onToggleLayer:(0,w.$0)("layers",p.bh),onContextMenu:p.pV,onBrowseData:p.Qr,onQueryBuilder:u.Zq,onDownload:p.LR,onSort:p.Dv,onSettings:p.RP,onZoomToExtent:d.Px,hideSettings:p.sF,updateSettings:p.VP,updateNode:p.tV,removeNode:p.ZF,onSelectNode:p.UG,onFilter:p.F5,onAddLayer:M.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:M.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:B.ky,onError:y.vU,hideLayerMetadata:p.Jh,onNewWidget:function(){return(0,F.A4)()},refreshLayerVersion:p.ct,onLayerInfo:M.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,s.compose)(ht,gt)(vt));const Et={TOCPlugin:R()(Tt,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:a().createElement(P.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:a().createElement(c.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:a().createElement("img",{src:C()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:o(146905).Z,query:o(797301).Z},epics:o(856175).Z(it.Z)}},671314:(e,t,o)=>{"use strict";o.d(t,{yn:()=>r,IY:()=>n,wQ:()=>i});var r=function(e){return e.swipe&&e.swipe||{active:!1}},n=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},i=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}}},393483:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,"\n.msgapi #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.msgapi .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .msgapi .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .msgapi .portal-dialog {\n        width: 100%;\n    }\n}\n",""]);const i=n},161253:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .toc-title {\n    display: inline-block;\n    max-width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""]);const i=n},172704:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var r=o(923645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=n},389179:(e,t,o)=>{var r=o(555639),n=o(640554),i=o(14841),a=o(479833),l=r.isFinite,s=Math.min;e.exports=function(e){var t=Math[e];return function(e,o){if(e=i(e),(o=null==o?0:s(n(o),292))&&l(e)){var r=(a(e)+"e").split("e"),c=t(r[0]+"e"+(+r[1]+o));return+((r=(a(c)+"e").split("e"))[0]+"e"+(+r[1]-o))}return t(e)}}},59854:(e,t,o)=>{var r=o(389179)("round");e.exports=r},264317:(e,t,o)=>{"use strict";var r=i(o(1174)),n=i(o(692381));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:n.default,CSSTransitionGroup:r.default}},819412:(e,t,o)=>{var r=o(798098);e.exports=function(e,t){var o=new r.io.GeoJSONReader,n=o.read(JSON.stringify(e.geometry)),i=o.read(JSON.stringify(t.geometry)),a=n.union(i);return{type:"Feature",geometry:a=(new r.io.GeoJSONWriter).write(a),properties:e.properties}}},624273:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="}}]);