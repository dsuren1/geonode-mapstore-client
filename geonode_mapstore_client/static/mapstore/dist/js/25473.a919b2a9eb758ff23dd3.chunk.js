(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25473],{31935:(r,n,e)=>{"use strict";e.d(n,{YL:()=>l,B0:()=>c,Mz:()=>a,TC:()=>s,qS:()=>f,Pe:()=>d,TP:()=>v});var t=e(22222),o=e(675110),i=e(93152),u=e(624262),l=function(r){return r.backgroundSelector&&r.backgroundSelector.source},c=function(r){return r.backgroundSelector&&r.backgroundSelector.modalParams},a=function(r){return r.backgroundSelector&&r.backgroundSelector.backgrounds||[]},s=function(r){return r.backgroundSelector&&r.backgroundSelector.lastRemovedId},f=function(r){return r.backgroundSelector&&r.backgroundSelector.confirmDeleteBackgroundModal},d=function(r){return r.backgroundSelector&&r.backgroundSelector.allowDeletion},v=(0,t.P1)(o.l2,i.$v,i.lh,(function(r,n,e){var t=r.filter((function(r){return r&&"background"===r.group}));return e&&e[n]?t.map((function(r){return(0,u.kf)(r,n)}))||[]:t}))},997291:(r,n,e)=>{"use strict";e.d(n,{YK:()=>j,oo:()=>P,zb:()=>w,en:()=>k,pW:()=>E,ei:()=>D,Hc:()=>A,cX:()=>T,__:()=>I,E2:()=>C,Li:()=>z,fP:()=>R,uy:()=>B,gB:()=>M,Ry:()=>_,m_:()=>L,dJ:()=>U,rV:()=>F,qJ:()=>K,pn:()=>N,F3:()=>Y});var t=e(227361),o=e.n(t),i=e(91175),u=e.n(i),l=e(22222),c=e(784715),a=e(986267),s=e(55237),f=e(285148),d=e(800827),v=e(675110);function p(r){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p(r)}function m(r){return function(r){if(Array.isArray(r))return h(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||S(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function b(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?y(Object(e),!0).forEach((function(n){g(r,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}function g(r,n,e){return(n=function(r){var n=function(r,n){if("object"!==p(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==p(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===p(n)?n:String(n)}(n))in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function O(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,o,i,u,l=[],c=!0,a=!1;try{if(i=(e=e.call(r)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(t=i.call(e)).done)&&(l.push(t.value),l.length!==n);c=!0);}catch(r){a=!0,o=r}finally{try{if(!c&&null!=e.return&&(u=e.return(),Object(u)!==u))return}finally{if(a)throw o}}return l}}(r,n)||S(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(r,n){if(r){if("string"==typeof r)return h(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(r,n):void 0}}function h(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}var j=function(r){return o()(r,"timeline.range")},P=function(r){return o()(r,"timeline.settings.expandLimit")},w=function(r){return o()(r,"timeline.settings.collapsed")},k=function(r){return o()(r,"timeline.settings.autoSelect")},E=function(r){return o()(r,"timeline.settings.snapType")||"start"},D=function(r){return o()(r,"timeline.settings.snapRadioButtonEnabled")||!1},A=function(r){return o()(r,"timeline.settings.endValuesSupport")},T=function(r){return o()(r,"timeline.settings.mapSync")},x=function(r,n){return(r||[]).reduce((function(r,e){return[].concat(m(r),m(function(r,n){var e=O(r.split("/"),3),t=e[0],o=e[1],i=e[2];if(i&&"0"!==i){var u=(0,s.Xu)({start:t,end:o,duration:i},n),l=u.count,c=u.start,a=u.end;return l>50?[{start:t,end:o,duration:i,type:"range",content:"".concat(l," items")}]:(0,s.tr)({start:c,end:a,duration:i}).map((function(r){return{start:new Date(r),end:new Date(r),type:"point"}}))}return isNaN(new Date(t).getTime())?null:[b({start:new Date(t),end:new Date(o||t),type:o?"range":"point"},o&&{className:"interval"})]}(e,n)))}),[]).filter((function(r){return r&&r.start}))},I=(0,c.y)(f.m$,j,(function(r){return o()(r,"timeline.rangeData")}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m(Object.keys(r).map((function(t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;return r&&r.values||r&&r.domain&&!(0,s._q)(r.domain)?x(r.values||r.domain.split(","),n):e&&e.histogram?function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(r.domain&&r.domain.values)return x(r.domain.values,n);if(r.histogram&&r.histogram.domain&&r.histogram.values){var e=O(r.histogram.domain.split("/"),3),t=e[0],o=e[1],i=e[2],u=Math.max.apply(Math,m(r.histogram.values)),l=(0,s.jb)({start:t,end:o,duration:i});return r.histogram.values.map((function(r,n){return b(b({},l[n]),{},{type:"range",itemType:"histogram",count:r,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*r/u,'%"></div> <span class="histogram-count">').concat(r,"</span></div>")})}))}return[]}(e,n):[]}(r[t],n,e[t]).map((function(){return b(b({content:" "},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{group:t})}))})).reduce((function(r,n){return[].concat(m(r),m(n))}),[]))})),C=function(r){return o()(r,"timeline.loading")},z=function(r){return o()(r,"timeline.selectedLayer")},R=function(r){return(0,v.CA)(r,z(r))},B=function(r){return R(r)&&R(r).name},M=function(r){return R(r)&&R(r).dimensions&&u()(R(r).dimensions.filter((function(r){return"time"===r.name})))},_=function(r){return o()(M(r),"source.url")},L=(0,l.P1)(f.WT,f.ns,(function(r,n){return{start:r,end:n}})),U=function(r){return(0,f.oP)(r,z(r))},F=f.AF,K=(0,l.P1)(F,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length>0})),N=function(r){return!w(r)&&K(r)},Y=function(r){return function(n){var e=((0,d.Od)(n)||{}).bbox;if(!e)return{};var t=(0,f.Qw)(r,"time")(n),i=o()(t,"source.version"),u=Object.keys(e.bounds).reduce((function(r,n){return b(b({},r),{},g({},n,parseFloat(e.bounds[n])))}),{});if(!u||!T(n))return{};if("1.2"!==i){var l=(0,f.Qw)(r,"space")(n),c=o()(l,"domain.CRS");if(!c||!u||!T(n))return{};var s=O((0,a.reprojectBbox)(u,(0,d.uy)(n),c),4),v=s[0],p=s[1],m=s[2],y=s[3];return m<v&&"EPSG:4326"===c&&(m+=360),{bbox:"".concat(v,",").concat(p,",").concat(m,",").concat(y),crs:c}}var S=u.minx,h=u.miny,j=u.maxx,P=u.maxy,w=e.crs;return{bbox:"".concat(S,",").concat(h,",").concat(j,",").concat(P,",").concat(w)}}}},76907:(r,n,e)=>{"use strict";e.d(n,{ez:()=>ir,gH:()=>fr,il:()=>or,iV:()=>cr,Il:()=>vr,sY:()=>pr,hs:()=>gr,sF:()=>Or,oS:()=>ar,yK:()=>lr,uu:()=>Z,YR:()=>br,fg:()=>q,Yj:()=>Q,HG:()=>X,UU:()=>rr,l_:()=>dr,L4:()=>tr,V$:()=>ur,km:()=>er,Bs:()=>nr});var t=e(800827),o=e(552259),i=e(22222),u=e(788113),l=e(401757),c=e(307877),a=e(285148),s=e(997291),f=e(675110),d=e(31935);function v(r){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},v(r)}function p(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function m(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?p(Object(e),!0).forEach((function(n){y(r,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}function y(r,n,e){return(n=function(r){var n=function(r,n){if("object"!==v(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==v(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===v(n)?n:String(n)}(n))in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var b={},g=(0,i.zB)({catalogServices:(0,i.zB)({services:u.b6,selectedService:u.Cb}),widgetsConfig:(0,i.zB)({widgets:l.zm,layouts:l.p,collapsed:l.lF}),mapInfoConfiguration:c.bI,dimensionData:(0,i.zB)({currentTime:a.WT,offsetTime:a.ns}),timelineData:(0,i.zB)({selectedLayer:s.Li,endValuesSupport:s.Hc,snapRadioButtonEnabled:s.ei})});function O(r){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},O(r)}var S=["map"];function h(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function j(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?h(Object(e),!0).forEach((function(n){var t,o,i;t=r,o=n,i=e[n],(o=function(r){var n=function(r,n){if("object"!==O(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==O(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===O(n)?n:String(n)}(o))in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}var P=e(866113),w=e(367306),k=e(535721),E=e(452992),D=e(957557),A=e.n(D),T=e(701469),x=e.n(T),I=e(513218),C=e.n(I),z=e(618446),R=e.n(z),B=e(478718),M=e.n(B),_=e(441609),L=e.n(_),U=e(227361),F=e.n(U),K=["data"],N=["maps"];function Y(r){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Y(r)}function H(r,n){if(null==r)return{};var e,t,o=function(r,n){if(null==r)return{};var e,t,o={},i=Object.keys(r);for(t=0;t<i.length;t++)e=i[t],n.indexOf(e)>=0||(o[e]=r[e]);return o}(r,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(t=0;t<i.length;t++)e=i[t],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(o[e]=r[e])}return o}function J(r){return function(r){if(Array.isArray(r))return $(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,n){if(r){if("string"==typeof r)return $(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$(r,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function V(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function G(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?V(Object(e),!0).forEach((function(n){W(r,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):V(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}function W(r,n,e){return(n=function(r){var n=function(r,n){if("object"!==Y(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==Y(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===Y(n)?n:String(n)}(n))in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var q=function(r){var n,e,t,o=null==r||null===(n=r.gnresource)||void 0===n?void 0:n.id,i=null==r||null===(e=r.gnresource)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.pk;return o||i},X=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.perms)||[]},Q=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.title)||!1},Z=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.abstract)||!1},rr=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.thumbnail_url)||!1},nr=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.updatingThumbnail)||!1},er=function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.thumbnailChanged)||!1},tr=function(r){var n;return(null==r||null===(n=r.gnresource)||void 0===n?void 0:n.type)||!1},or=function(r){var n,e,t,o,i=null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.permissions)||void 0===e?void 0:e.canEdit,u=(null==r||null===(t=r.gnresource)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.perms)||[];return i||u.includes("change_resourcebase")},ir=function(r){var n,e,t;return null==r||null===(n=r.security)||void 0===n||null===(e=n.user)||void 0===e||null===(t=e.perms)||void 0===t?void 0:t.includes("add_resource")},ur=function(r){var n;return!(null==r||null===(n=r.gnresource)||void 0===n||!n.isNew)},lr=function(r){var n;return null==r||null===(n=r.gnresource)||void 0===n?void 0:n.data},cr=function(r){var n;return(null==r||null===(n=r.gnresource)||void 0===n?void 0:n.compactPermissions)||{}},ar=function(r){var n,e,t,o=null==r||null===(n=r.gnresource)||void 0===n?void 0:n.compactPermissions,i=null==r||null===(e=r.gnresource)||void 0===e?void 0:e.isCompactPermissionsChanged,u=null==r||null===(t=r.gnresource)||void 0===t?void 0:t.geoLimits;return{compactPermissions:(i||(null==u?void 0:u.length)>0)&&o?o:null,geoLimits:(null==u?void 0:u.length)>0?u:null}},sr=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((function(n){return r.info.groups.some((function(r){return r===n.name}))&&"manage"===n.permissions}))||!1},fr=function(r){var n,e=cr(r),t=e.users||[],o=e.groups||[],i=e.organizations||[],u=null==r||null===(n=r.security)||void 0===n?void 0:n.user,l=(u&&t.find((function(r){return r.id===u.pk}))||{}).permissions;return["owner","manage"].includes(l)||sr(u,o)||sr(u,i)},dr=function(r){var n;return null==r||null===(n=r.gnresource)||void 0===n?void 0:n.selectedLayerPermissions},vr=function(r,n){var e;switch(n||(null==r||null===(e=r.gnresource)||void 0===e?void 0:e.type)){case k.P6.MAP:return(0,t.Od)(r)?function(r){var n=(0,f.l2)(r),e=function(r){var n=(0,t.Od)(r),e=(0,f.l2)(r),i=(0,f.Bt)(r),u=(0,d.Mz)(r),l=function(r){return r.searchconfig&&r.searchconfig.textSearchConfig}(r),c=function(r){return r.searchbookmarkconfig&&r.searchbookmarkconfig.bookmarkSearchConfig}(r),a=function(r){var n=Object.keys(b).reduce((function(n,e){return m(m({},n),{},y({},e,b[e](r)))}),{});return m(m({},g(r)),n)}(r);return o.default.saveMapConfiguration(n,e,i,u,l,c,a)}(r),i=e.map;return j(j({},function(r,n){if(null==r)return{};var e,t,o=function(r,n){if(null==r)return{};var e,t,o={},i=Object.keys(r);for(t=0;t<i.length;t++)e=i[t],n.indexOf(e)>=0||(o[e]=r[e]);return o}(r,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(t=0;t<i.length;t++)e=i[t],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(o[e]=r[e])}return o}(e,S)),{},{map:j(j({},i),{},{layers:((null==i?void 0:i.layers)||[]).map((function(r){var e=n.find((function(n){return n.id===r.id}));if(e){var t=e.availableStyles;return j(j({},r),{},{availableStyles:t})}return r}))})})}(r):null;case k.P6.GEOSTORY:return(0,P.Kg)(r);case k.P6.DASHBOARD:return(0,l.md)(r);default:return null}},pr=function(r,n){var e,t=n||(null==r||null===(e=r.gnresource)||void 0===e?void 0:e.type);return[k.P6.DATASET,k.P6.MAP].includes(t)?null:function(r){var n,e;return(null==r||null===(n=r.gnresource)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.extent)||{}}(r)};function mr(r,n){return x()(r)?r.map((function(r){return mr(r,n)})):C()(r)?Object.keys(A()(r,n)).reduce((function(e,t){return G(G({},e),{},W({},t,mr(r[t],n)))}),{}):r}function yr(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.crs===n.crs&&Math.abs(r.x-n.x)<1e-12&&Math.abs(r.y-n.y)<1e-12}var br=function(r){var n,e,t,i=fr(r),u=(0,E.s2)(r),l=(0,E.SJ)(r);if(!i||u||l)return null;var c=null==r||null===(n=r.gnresource)||void 0===n?void 0:n.type,a=["title","abstract","data","extent"],s=M()((null==r||null===(e=r.gnresource)||void 0===e?void 0:e.initialResource)||{},a),f=s.data,d=void 0===f?{}:f,v=H(s,K),p=ar(r),m=p.compactPermissions,y=p.geoLimits,b=JSON.parse(JSON.stringify(vr(r)||{})),g=A()(null==r||null===(t=r.gnresource)||void 0===t?void 0:t.data,["thumbnail_url","thumbnailChanged","updatingThumbnail"])||{},O=M()(g,a),S=!function(r){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null==r||null===(n=r.gnresource)||void 0===n?void 0:n.type;if(L()(e)||L()(t))return!0;switch(i){case k.P6.MAP:return(0,o.compareMapChanges)(mr(e,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]),mr(t,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]));case k.P6.GEOSTORY:return R()(mr(e,["fontFamilies"]),mr(t,["fontFamilies"]));case k.P6.DASHBOARD:var u=(null==e?void 0:e.widgets)||[],l=u.every((function(r){return"map"!==r.widgetType||!!r.maps})),c=!!((null==t?void 0:t.widgets)||[]).find((function(r){if("map"===r.widgetType){var n,e=u.find((function(n){return n.id===r.id})),t=J(r.maps),o=l?t.every((function(r){var n,t=(null==e||null===(n=e.maps)||void 0===n?void 0:n.find((function(n){return n.mapId===r.mapId})))||{};return yr(null==t?void 0:t.center,null==r?void 0:r.center)})):yr(null==e||null===(n=e.map)||void 0===n?void 0:n.center,t[0].center);return!e||!o}return!1})),a=l?t:G(G({},t),{},{widgets:t.widgets.map((function(r){if(r.maps){var n=r.maps;delete r.maps,r.map=n[0]}return r}))}),s=["bbox","size","center","layouts"],f=l?s:["bbox","size","center","layouts","mapId","dependenciesMap","selectedMapId"];return R()(mr(e,s),mr(a,f))&&!c;default:return!0}}(r,d,b),h=!(L()(O)||L()(v)||R()(O,v));return m||y||S||h?{compactPermissions:m,geoLimits:y,resource:h?g:void 0,data:S?b:void 0,resourceType:c,pk:g.pk}:null},gr=function(r){return F()((0,P.Kg)(r),"resources",[]).filter((function(r){var n;return"geonode"===(null==r||null===(n=r.data)||void 0===n?void 0:n.sourceId)})).reduce((function(r,n){return["image","video"].includes(n.type)&&n.id?G(G({},r),{},{documents:[].concat(J(r.documents),[n.id])}):"map"===n.type&&n.id?G(G({},r),{},{maps:[].concat(J(r.maps),[n.id])}):r}),{maps:[],documents:[]})},Or=function(r){return F()((0,w.hS)(r),"widgets",[]).reduce((function(r,n){var e,t,o,i,u=n.maps,l=H(n,N);return u&&"map"===l.widgetType?G(G({},r),{},{maps:[].concat(J(r.maps),J(u.filter((function(r){var n;return!(null==r||null===(n=r.extraParams)||void 0===n||!n.pk)})).map((function(r){return r.extraParams.pk}))))}):"map"===l.widgetType&&null!==(e=l.map)&&void 0!==e&&null!==(t=e.extraParams)&&void 0!==t&&t.pk?G(G({},r),{},{maps:[].concat(J(r.maps),[null===(o=l.map)||void 0===o||null===(i=o.extraParams)||void 0===i?void 0:i.pk])}):r}),{maps:[]})}},452992:(r,n,e)=>{"use strict";e.d(n,{jp:()=>f,WB:()=>d,zL:()=>v,aZ:()=>p,IX:()=>m,SJ:()=>y,s2:()=>b});var t=e(76907),o=e(12530),i=e(653488);function u(r){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u(r)}function l(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function c(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){var t,o,i;t=r,o=n,i=e[n],(o=function(r){var n=function(r,n){if("object"!==u(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===u(n)?n:String(n)}(o))in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}function a(r){return function(r){if(Array.isArray(r))return s(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,n){if(r){if("string"==typeof r)return s(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(r,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}var f=function(r,n){var e,t;return((null==r||null===(e=r.resourceservice)||void 0===e||null===(t=e.processes)||void 0===t?void 0:t.find((function(r){var e,t;return(null==r||null===(e=r.resource)||void 0===e?void 0:e.pk)===(null==n||null===(t=n.resource)||void 0===t?void 0:t.pk)&&(null==r?void 0:r.processType)===(null==n?void 0:n.processType)})))||{}).completed},d=function(r){var n,e,o=(0,t.yK)(r);return!!(null==r||null===(n=r.resourceservice)||void 0===n||null===(e=n.downloads)||void 0===e?void 0:e.find((function(r){return(null==r?void 0:r.pk)===(null==o?void 0:o.pk)})))},v=function(r){var n,e=(0,i.BP)(r),t=(null==r||null===(n=r.resourceservice)||void 0===n?void 0:n.downloads)||[];return null==e?void 0:e.reduce((function(r,n){return t.find((function(r){return r.pk===n.pk}))?[].concat(a(r),[c({},n)]):a(r)}),[])},p=function(r){var n,e=(0,i.n)(r),t=(null==r||null===(n=r.resourceservice)||void 0===n?void 0:n.downloads)||[];return null==e?void 0:e.reduce((function(r,n){return t.find((function(r){return r.pk===n.pk}))?[].concat(a(r),[c({},n)]):a(r)}),[])},m=function(r){var n,e,i=(0,t.yK)(r),u=i&&(null==r||null===(n=r.resourceservice)||void 0===n||null===(e=n.processes)||void 0===e?void 0:e.find((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==i?void 0:i.pk)&&(null==r?void 0:r.processType)===o.zj.PERMISSIONS_RESOURCE})));return!(!u||null!=u&&u.completed)},y=function(r){var n,e,i=(0,t.yK)(r),u=i&&(null==r||null===(n=r.resourceservice)||void 0===n||null===(e=n.processes)||void 0===e?void 0:e.find((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==i?void 0:i.pk)&&(null==r?void 0:r.processType)===o.zj.COPY_RESOURCE})));return!(!u||null!=u&&u.completed)},b=function(r){var n,e,i=(0,t.yK)(r),u=i&&(null==r||null===(n=r.resourceservice)||void 0===n||null===(e=n.processes)||void 0===e?void 0:e.find((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==i?void 0:i.pk)&&(null==r?void 0:r.processType)===o.zj.DELETE_RESOURCE})));return!(!u||null!=u&&u.completed)}},653488:(r,n,e)=>{"use strict";e.d(n,{BP:()=>l,n:()=>c,m0:()=>a,ak:()=>s});var t=e(535721);function o(r){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o(r)}function i(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),e.push.apply(e,t)}return e}function u(r){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){var t,i,u;t=r,i=n,u=e[n],(i=function(r){var n=function(r,n){if("object"!==o(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var t=e.call(r,"string");if("object"!==o(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===o(n)?n:String(n)}(i))in t?Object.defineProperty(t,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[i]=u})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}var l=function(r){var n,e,o=(null==r||null===(n=r.gnsearch)||void 0===n?void 0:n.resources)||[],i=(null==r||null===(e=r.resourceservice)||void 0===e?void 0:e.processes)||[],l=o.map((function(r){var n=i.filter((function(n){var e;return(null==n||null===(e=n.resource)||void 0===e?void 0:e.pk)===(null==r?void 0:r.pk)}));return n.length>0?u(u({},r),{},{processes:n}):r}));return(0,t.AU)(l)},c=function(r){var n,e,o,i=(null==r||null===(n=r.gnsearch)||void 0===n||null===(e=n.featuredResources)||void 0===e?void 0:e.resources)||[],l=(null==r||null===(o=r.resourceservice)||void 0===o?void 0:o.processes)||[],c=i.map((function(r){var n=l.filter((function(n){var e;return(null==n||null===(e=n.resource)||void 0===e?void 0:e.pk)===(null==r?void 0:r.pk)}));return n.length>0?u(u({},r),{},{processes:n}):r}));return(0,t.AU)(c)},a=function(r){var n,e=l(r).filter((function(r){return r["@temporary"]})).length;return((null==r||null===(n=r.gnsearch)||void 0===n?void 0:n.total)||0)+e},s=function(r){var n;return null==r||null===(n=r.gnsearch)||void 0===n?void 0:n.facetItems}}}]);